# WRSS Builder

Welcome to the **WRSS Builder** repository. This project provides a user-friendly interface to build, visualize, and export **WRSS (Water Resources Simulation System) basin objects**. It combines an interactive HTML GUI with R functions to manage and export basin data for modeling and analysis.

---

## Live Interface

You can explore the interactive WRSS Builder GUI directly in your browser:

[Open WRSS Builder Live](https://rarabzad.github.io/WRSS_builder/)

The GUI allows you to:

- Create and edit basins with rivers, reservoirs, junctions, demands, diversions, and aquifers.  
- Visualize the network structure dynamically.  
- Export basin configurations to JSON for use in R or integration with WRSS models.  
- Access **About** and **Help** modals that provide guidance and developer information.

---

## R Function: `save_basin_json()`

This repository provides a key R function to export basin objects to JSON.

**Function:** [save_basin_json()](https://github.com/rarabzad/WRSS_builder/blob/main/save_basin_json)

### Description

`save_basin_json()` converts a WRSS `basin` object into a clean JSON file, handling:

- Nested lists of components (reservoirs, rivers, junctions, demands, diversions, aquifers).  
- References between components (`downstream`, `suppliers`, `seepageObject`, `leakageObject`, `divertObject`) by converting numeric labels to human-readable names.  
- Special R objects like formulas, expressions, and calls.  
- Removal of functions, environments, and internal attributes for JSON compatibility.  

The resulting JSON can be imported into the HTML GUI for visualization or further analysis.

### Example Usage

```r
library(WRSS)

# Load a basin object
basin_obj <- load("example_basin.rda")

# Save to JSON
save_basin_json(basin_obj, "basin_output.json")
````

### Example Output

An example JSON generated by `save_basin_json()` is available here:

[View example: area.json](https://github.com/rarabzad/WRSS_builder/blob/main/area.json)

This JSON can be imported directly into the GUI to visualize the basin configuration.

---

## Repository Contents

```
WRSS_builder/
├─ wrss_builder_final.html   # Main interactive HTML GUI
├─ save_basin_json           # R function to export basin objects to JSON
├─ area.json                 # Example JSON output
├─ README.md                 # This file
└─ ...                       # Additional scripts and resources
```

---

## Getting Started

1. Open the live GUI: [https://rarabzad.github.io/WRSS_builder/](https://rarabzad.github.io/WRSS_builder/)
2. Use the **Help** modal inside the GUI to learn about component types and actions.
3. **(optional)** In R, use `save_basin_json()` to export your basin objects as JSON
4. **(optional)** Import the JSON into the GUI to visualize or edit your basin configurations.

---

## Contact

For questions or feedback, contact **Rezgar Arabzadeh**:
Email: [rarabzad@uwaterloo.ca](mailto:rarabzad@uwaterloo.ca)
